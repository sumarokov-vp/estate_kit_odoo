title: "Миграция данных на сервере"
status: done
created_at: 15.02.2026
completed_at: 15.02.2026

todoist:
  task_id: "6g2m8WxVCvPH3Qgq"

description: |
  SQL миграция существующих данных на сервере после деплоя:
  - new → draft
  - ready → active (или internal_review — уточнить)
  - published → published (без изменений)
  - unpublished → unpublished (без изменений)
  - Объекты с mls_status='received' → state='mls_listed'

recommendation: |
  UPDATE estate_property SET state = 'draft' WHERE state = 'new';
  UPDATE estate_property SET state = 'active' WHERE state = 'ready';
  -- Для объектов из MLS (если есть external_id и не наши):
  -- Определить по признакам какие объекты чужие и поставить mls_listed

  Выполнить после деплоя и -u estate_kit.

solution: |
  Выполнена SQL миграция на сервере 46.101.177.22:
  - UPDATE estate_property SET state = 'draft' WHERE state = 'new' → 18 записей
  - UPDATE estate_property SET state = 'active' WHERE state = 'ready' → 1 запись
  Объектов из MLS не обнаружено (нет записей с mls_status='received').
